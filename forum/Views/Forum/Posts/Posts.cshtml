@model forum.ViewModels.ForumPostsViewModel
@{
    ViewData["Title"] = "Posts";

}


<style>

    body {
        margin-top: 20px;
        background: #eee;
        color: #708090;
    }

    .icon-1x {
        font-size: 24px !important;
    }

    a {
        text-decoration: none;
    }

        .text-primary, a.text-primary:focus, a.text-primary:hover {
            color: #00ADBB !important;
        }

    .text-black, .text-hover-black:hover {
        color: #000 !important;
    }

    .font-weight-bold {
        font-weight: 700 !important;
    }

    form {
        max-width: 600px;
        margin: 0 auto;
    }

    .form-group {
        margin-bottom: 20px;
    }

    label {
        display: block;
        margin-bottom: 5px;
    }

    .form-control {
        width: 100%;
    }



    button[type="submit"] {
        margin-top: 20px;
    }

</style>

<div style="margin-bottom: 50px">
    
    
    <h1>@Model.ForumTitle </h1>
    <a asp-action="Index"> <button class="btn-primary">   back to forums list  </button></a>

</div>


<link href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" rel="stylesheet">
<div class="container">
    <div class="row">
        <!-- Main content -->
        <div class="col-lg-9 mb-3">
      
            <div class="card row-hover pos-relative py-3 px-3 mb-3 border-warning border-top-0 border-right-0 border-bottom-0 rounded-0" style="display: none; width : 80%" id="questionForm" >

                <div style="margin-bottom : 50px">
                 
                    @if (User.Identity.IsAuthenticated)
                    {
                        <form asp-controller="Post" asp-action="create" method="post">
                            
                            <div class="-group">
                                <label >Title</label>
                                <input type="text" class="form-control" id="title" name="title" required="true">

                            </div>
                            <div class="form-group">
                                <label>Post</label>
                                <textarea class="form-control" id="post" name="post" rows="3" required="true"></textarea>

                            </div>
                            <div class="form-group">
                                <label for="keywords" >Keywords (comma-separated):</label>
                                <input class="form-control" type="text" id="keywords" name="keywords" required="true">
                            </div>
                            <div class="form-group">

                                <input hidden="true" class="form-control" type="text" id="isSubjet" name="isSubjet" value="true" >
                                <input hidden="true" class="form-control" type="text" id="forumId" name="forumId" value="@Model.ForumId">
                            </div>

                            <button type="submit" class="btn btn-primary">Submit</button>
                        </form>



                    }
               

                </div>
            </div>
            <p>Total Posts: @Model.Posts.Count</p>

            @foreach (var post in Model.Posts)
            {
                <div class="card row-hover pos-relative py-3 px-3 mb-3 border-warning border-top-0 border-right-0 border-bottom-0 rounded-0">
                    <div class="row align-items-center">
                        <div class="col-md-8 mb-3 mb-sm-0">
                            <img alt="Avatar" class="rounded-circle mt-5" width="35px" src="@post?.CreatorUser.CheminAvatar" />
                            <h5>


                                <a asp-controller="Post" asp-action="Index" asp-route-id="@post.PostID" class="text-primary">@post.Title</a>
                            </h5>

                            <p class="text-sm">
                                <span class="op-6">Posted on @post.DateCreationMessage.ToString()</span>





                                <span class="op-6">by</span>
                                <a class="text-black" href="#">@post.CreatorUser.UserName</a>
                            </p>


                            <p class="text-sm" style="font-size: 12px">
                                <span class="op-6">Updated</span>

                                @{
                                    var timeDifferenceLastMessage = (DateTime.Now - (post.DateCreationLastMessage ?? DateTime.Now));
                                    var minutesAgoLastNessage = timeDifferenceLastMessage.TotalMinutes;
                                }
                                <a class="text-black" href="#"> @(minutesAgoLastNessage.ToString("F0")) minutes ago </a>



                                <span class="op-6">by</span>
                                <a class="text-black" href="#">@post.CreatorUser.UserName</a>
                            </p>
                            <div class="text-sm op-5">


                                <a class="text-black mr-2" href="#">@post.Message</a>

                            </div>
                            <div class="text-sm op-5">


                                <a class="text-black mr-2" href="#">#@post.MotCle</a>

                            </div>
                            <div class="text-sm op-5">


                                <a class="text-black mr-2" href="#">@post.Message</a>

                            </div>
                        </div>
                        <div class="col-md-4 op-7">
                            <div class="row text-center op-7">
                                <div class="col px-1"> <i class="ion-connection-bars icon-1x"></i> <span class="d-block text-sm"> Votes</span> </div>
                                <div class="col px-1"> <i class="ion-ios-chatboxes-outline icon-1x"></i> <span class="d-block text-sm"> Replies</span> </div>
                                <div class="col px-1"> <i class="ion-ios-eye-outline icon-1x"></i> <span class="d-block text-sm"> Views</span> </div>
                            </div>
                        </div>
                    </div>
                </div>
            }


        
          
         
        </div>
        <!-- Sidebar content -->
        <div class="col-lg-3 mb-4 mb-lg-0 px-lg-0 mt-lg-0">
            <div style="visibility: hidden; display: none; width: 285px; height: 801px; margin: 0px; float: none; position: static; inset: 85px auto auto;"></div><div data-settings="{&quot;parent&quot;:&quot;#content&quot;,&quot;mind&quot;:&quot;#header&quot;,&quot;top&quot;:10,&quot;breakpoint&quot;:992}" data-toggle="sticky" class="sticky" style="top: 85px;">
                <div class="sticky-inner">
                    <a class="btn btn-lg btn-block btn-success rounded-0 py-4 mb-3 bg-op-6 roboto-bold" id="askQuestionBtn">Ask Question</a>
                    
                    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>

                    <script>
                    $(document).ready(function () {
                        $("#askQuestionBtn").click(function () {
                            $("#questionForm").toggle();
                        });
                    });
                </script>

                    <div class="bg-white mb-3">
                        <h4 class="px-3 py-4 op-5 m-0">
                            Active Topics
                        </h4>
                        <hr class="m-0">
                        <div class="pos-relative px-3 py-3">
                            <h6 class="text-primary text-sm">
                                <a href="#" class="text-primary">Why Bootstrap 4 is so awesome? </a>
                            </h6>
                            <p class="mb-0 text-sm"><span class="op-6">Posted</span> <a class="text-black" href="#">39 minutes</a> <span class="op-6">ago by</span> <a class="text-black" href="#">AppStrapMaster</a></p>
                        </div>
                        <hr class="m-0">
                     
                    </div>
                    <div class="bg-white text-sm">
                        <h4 class="px-3 py-4 op-5 m-0 roboto-bold">
                            Stats
                        </h4>
                        <hr class="my-0">
                        <div class="row text-center d-flex flex-row op-7 mx-0">
                            <div class="col-sm-6 flex-ew text-center py-3 border-bottom border-right"> <a class="d-block lead font-weight-bold" href="#">58</a> Topics </div>
                            <div class="col-sm-6 col flex-ew text-center py-3 border-bottom mx-0"> <a class="d-block lead font-weight-bold" href="#">1.856</a> Posts </div>
                        </div>
                        <div class="row d-flex flex-row op-7">
                            <div class="col-sm-6 flex-ew text-center py-3 border-right mx-0"> <a class="d-block lead font-weight-bold" href="#">300</a> Members </div>
                            <div class="col-sm-6 flex-ew text-center py-3 mx-0"> <a class="d-block lead font-weight-bold" href="#">DanielD</a> Newest Member </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>

